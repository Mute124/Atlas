\doxysection{Enabling buffer device address}
\hypertarget{enabling_buffer_device_address}{}\label{enabling_buffer_device_address}\index{Enabling buffer device address@{Enabling buffer device address}}
Device extension VK\+\_\+\+KHR\+\_\+buffer\+\_\+device\+\_\+address allow to fetch raw GPU pointer to a buffer and pass it for usage in a shader code. It has been promoted to core Vulkan 1.\+2.

If you want to use this feature in connection with VMA, follow these steps\+:\hypertarget{enabling_buffer_device_address_enabling_buffer_device_address_initialization}{}\doxysubsection{\texorpdfstring{Initialization}{Initialization}}\label{enabling_buffer_device_address_enabling_buffer_device_address_initialization}
1) (For Vulkan version \texorpdfstring{$<$}{<} 1.\+2) Call {\ttfamily vk\+Enumerate\+Device\+Extension\+Properties} for the physical device. Check if the extension is supported -\/ if returned array of {\ttfamily \doxylink{struct_vk_extension_properties}{Vk\+Extension\+Properties}} contains "{}\+VK\+\_\+\+KHR\+\_\+buffer\+\_\+device\+\_\+address"{}.

2) Call {\ttfamily vk\+Get\+Physical\+Device\+Features2} for the physical device instead of old {\ttfamily vk\+Get\+Physical\+Device\+Features}. Attach additional structure {\ttfamily Vk\+Physical\+Device\+Buffer\+Device\+Address\+Features\texorpdfstring{$\ast$}{*}} to {\ttfamily \doxylink{struct_vk_physical_device_features2_a8fa1c66e8ce573b76b5944675e81cf95}{Vk\+Physical\+Device\+Features2\+::p\+Next}} to be returned. Check if the device feature is really supported -\/ check if {\ttfamily Vk\+Physical\+Device\+Buffer\+Device\+Address\+Features\+::buffer\+Device\+Address} is true.

3) (For Vulkan version \texorpdfstring{$<$}{<} 1.\+2) While creating device with {\ttfamily vk\+Create\+Device}, enable this extension -\/ add "{}\+VK\+\_\+\+KHR\+\_\+buffer\+\_\+device\+\_\+address"{} to the list passed as {\ttfamily \doxylink{struct_vk_device_create_info_ac24ac5c4da5fdd813bbe1a92d1e24d73}{Vk\+Device\+Create\+Info\+::pp\+Enabled\+Extension\+Names}}.

4) While creating the device, also don\textquotesingle{}t set {\ttfamily \doxylink{struct_vk_device_create_info_aa86204beaa9cdef75610e19f466e34dd}{Vk\+Device\+Create\+Info\+::p\+Enabled\+Features}}. Fill in {\ttfamily \doxylink{struct_vk_physical_device_features2}{Vk\+Physical\+Device\+Features2}} structure instead and pass it as {\ttfamily \doxylink{struct_vk_device_create_info_a6705b435f7d53c207d872d24d4717749}{Vk\+Device\+Create\+Info\+::p\+Next}}. Enable this device feature -\/ attach additional structure {\ttfamily Vk\+Physical\+Device\+Buffer\+Device\+Address\+Features\texorpdfstring{$\ast$}{*}} to {\ttfamily \doxylink{struct_vk_physical_device_features2_a8fa1c66e8ce573b76b5944675e81cf95}{Vk\+Physical\+Device\+Features2\+::p\+Next}} and set its member {\ttfamily buffer\+Device\+Address} to {\ttfamily VK\+\_\+\+TRUE}.

5) While creating \doxylink{struct_vma_allocator}{Vma\+Allocator} with \doxylink{group__group__init_gaf77c946fbecfcc54d02c3d1c1e7e23e7}{vma\+Create\+Allocator()} inform VMA that you have enabled this feature -\/ add \doxylink{group__group__init_gga4f87c9100d154a65a4ad495f7763cf7ca5f1b28b0414319d1687e1f2b30ab0089}{VMA\+\_\+\+ALLOCATOR\+\_\+\+CREATE\+\_\+\+BUFFER\+\_\+\+DEVICE\+\_\+\+ADDRESS\+\_\+\+BIT} to \doxylink{struct_vma_allocator_create_info_a392ea2ecbaff93f91a7c49f735ad4346}{Vma\+Allocator\+Create\+Info\+::flags}.\hypertarget{enabling_buffer_device_address_enabling_buffer_device_address_usage}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{enabling_buffer_device_address_enabling_buffer_device_address_usage}
After following steps described above, you can create buffers with {\ttfamily VK\+\_\+\+BUFFER\+\_\+\+USAGE\+\_\+\+SHADER\+\_\+\+DEVICE\+\_\+\+ADDRESS\+\_\+\+BIT\texorpdfstring{$\ast$}{*}} using VMA. The library automatically adds {\ttfamily VK\+\_\+\+MEMORY\+\_\+\+ALLOCATE\+\_\+\+DEVICE\+\_\+\+ADDRESS\+\_\+\+BIT\texorpdfstring{$\ast$}{*}} to allocated memory blocks wherever it might be needed.

Please note that the library supports only {\ttfamily VK\+\_\+\+BUFFER\+\_\+\+USAGE\+\_\+\+SHADER\+\_\+\+DEVICE\+\_\+\+ADDRESS\+\_\+\+BIT\texorpdfstring{$\ast$}{*}}. The second part of this functionality related to "{}capture and replay"{} is not supported, as it is intended for usage in debugging tools like Render\+Doc, not in everyday Vulkan usage.\hypertarget{enabling_buffer_device_address_enabling_buffer_device_address_more_information}{}\doxysubsection{\texorpdfstring{More information}{More information}}\label{enabling_buffer_device_address_enabling_buffer_device_address_more_information}
To learn more about this extension, see \href{https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/chap46.html\#VK_KHR_buffer_device_address}{\texttt{ VK\+\_\+\+KHR\+\_\+buffer\+\_\+device\+\_\+address in Vulkan specification}}

Example use of this extension can be found in the code of the sample and test suite accompanying this library. 